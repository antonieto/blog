---
import type { GetStaticPaths } from "astro";
import { getEntry } from "astro:content";
import { render } from "astro:content";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import BlogEntry from "../../components/BlogEntry.tsx";

export const getStaticPaths = (async () => {
	const allBlogs = await getCollection("blog");
	return allBlogs.map((blog) => ({ params: { slug: blog.slug } }));
}) satisfies GetStaticPaths;

const { slug } = Astro.params;

const blog = await getEntry("blog", slug);

const { Content } = await render(blog);
---

<Layout title={blog.data.title}>
	<BlogEntry>
		<Content />
	</BlogEntry>
</Layout>
